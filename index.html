<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Flipbook Realista</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
  background:radial-gradient(circle,#111 0%,#000 70%);
  font-family:Arial,Helvetica,sans-serif;
  overflow:hidden;
  color:#fff;
}

/* ===== TOOLBAR ===== */
.toolbar{
  position:fixed;
  top:0;
  width:100%;
  height:54px;
  background:rgba(0,0,0,.75);
  display:flex;
  justify-content:center;
  align-items:center;
  gap:14px;
  z-index:100;
}

/* ===== STAGE ===== */
#stage{
  position:absolute;
  top:54px;
  width:100%;
  height:calc(100vh - 54px);
  display:flex;
  justify-content:center;
  align-items:center;
  perspective:3200px;
}

/* ===== BOOK ===== */
#book{
  width:min(96vw,980px);
  height:min(80vh,640px);
  position:relative;
  display:flex;
  transform-style:preserve-3d;
}

/* ===== SPINE ===== */
#spine{
  width:28px;
  background:linear-gradient(to right,#050505,#222,#111);
  box-shadow:inset -3px 0 6px rgba(255,255,255,.2);
}

/* ===== PAGE AREA ===== */
.page-area{
  flex:1;
  position:relative;
  overflow:hidden;
  background:#000;
  border-radius:10px;
  box-shadow:0 25px 60px rgba(0,0,0,.8);
}

/* ===== IMAGE FIX ===== */
.page-area img{
  width:100%;
  height:100%;
  object-fit:contain;
  object-position:center;
  display:block;
  background:black;
}

/* ===== DRAG PAGE ===== */
#dragPage{
  position:absolute;
  inset:0;
  transform-origin:left center;
  pointer-events:none;
  backface-visibility:hidden;
}

#dragPage img{
  width:100%;
  height:100%;
  object-fit:contain;
  background:black;
}

/* ===== SHADOW ===== */
#shadow{
  position:absolute;
  inset:0;
  pointer-events:none;
  background:linear-gradient(to left,rgba(0,0,0,.6),transparent);
  opacity:0;
  transition:opacity .1s;
}

/* ===== INDICATOR ===== */
#indicator{
  position:fixed;
  bottom:12px;
  width:100%;
  text-align:center;
  font-size:14px;
  color:#ccc;
}

/* ===== MOBILE ===== */
@media(max-width:700px){
  #book{
    width:96vw;
    height:70vh;
  }
}
</style>
</head>

<body>

<div class="toolbar"></div>

<div id="stage">
  <div id="book">
    <div class="page-area" id="left"></div>
    <div id="spine"></div>
    <div class="page-area" id="right"></div>

    <div id="dragPage"></div>
    <div id="shadow"></div>
  </div>
</div>

<div id="indicator"></div>

<script>
// ===== IMAGES =====
const images = [
 "https://static.wfolio.com/file/AqiFFw_TXMM4LDwoI2TPSYAM1lHVLAGB/F3eUE25SDaCuzHhNj6Pu6JOqhHkcmUkD/y5OULgSkTfmEFevVH6Sf_loR35892Czc/Dy85mrv_jbZUp1onboKxfJJyYVSz1JUI/U4y1x4H6X9pCsFBn2RAH-qGGC4IFVPta/uWbrLQxih0WNi86HfJcUhzy8Oli73U59.jpg",
 "https://static.wfolio.com/file/AqiFFw_TXMM4LDwoI2TPSYAM1lHVLAGB/F3eUE25SDaCuzHhNj6Pu6JOqhHkcmUkD/qNEexo_dNL8-0oCofAljcVJFCTV3ZNlV/bdDGeVS7xD1w9l9IcE0L6z8vmYH8FFbe/A9zTFht7a6E7ez6hREaW3YOtprh60w0u/Wi1bdshLwU4.jpg",
 "https://static.wfolio.com/file/AqiFFw_TXMM4LDwoI2TPSYAM1lHVLAGB/F3eUE25SDaCuzHhNj6Pu6JOqhHkcmUkD/Pw65VlFkMsO6lQV4CDlyrWsjXSkEz0Ah/c1i9ixp9Tg4A9hTDQdcO1Dxc_yoBdACL/FPfIlczoHtlqVb5752-w7QR0voXhMX9o/RQShPhBhB68.jpg",
 "https://static.wfolio.com/file/AqiFFw_TXMM4LDwoI2TPSYAM1lHVLAGB/F3eUE25SDaCuzHhNj6Pu6JOqhHkcmUkD/zZqnEvAAIq6FvmDfHTFJsBgKq8WvL3nN/etBmGlCmqocfOuTYTj47VdmnJUlMdJQb/5pfWbmfSHzYVP2ZQTXxT0z3RwnNp6C5_/T83uCi3ltVc.jpg",
 "https://static.wfolio.com/file/AqiFFw_TXMM4LDwoI2TPSYAM1lHVLAGB/F3eUE25SDaCuzHhNj6Pu6JOqhHkcmUkD/jiBuVFhkgxZMh4Wla0d04ExhZSW-9Y09/SZWHP4lTKay1zdNJyyl_XcVtWr2o6qxm/mpIIlAh7ux9fboPNVlRqOXz3N0GVMkMP/eVq_OU5Y-FU.jpg",
 "https://static.wfolio.com/file/AqiFFw_TXMM4LDwoI2TPSYAM1lHVLAGB/F3eUE25SDaCuzHhNj6Pu6JOqhHkcmUkD/8gCM3saGL9vugTjFfIGW6HRjn6Ohg-Te/Z8J9OcgsHBZyJ6UI6sTsHRFqZFRF-a7M/bzylEzdicq9A1agfjdUp34Q1wfpHF8Eb/fGgeWxfcm1A.jpg",
 "https://static.wfolio.com/file/AqiFFw_TXMM4LDwoI2TPSYAM1lHVLAGB/F3eUE25SDaCuzHhNj6Pu6JOqhHkcmUkD/e3HkNKPh5OqI4T4PYUEFR0zzPbBA8PBB/IlBpfiue1_ALoFp_3RBlUp5V4kCwsQ3q/tk-pFB0oWzVexZlmuqVzvh4Wbp75Zjyz/-_FFkk8xOXI.jpg"
];

let index = 0;
const left = document.getElementById("left");
const right = document.getElementById("right");
const dragPage = document.getElementById("dragPage");
const shadow = document.getElementById("shadow");
const indicator = document.getElementById("indicator");

let dragging = false;
let startX = 0;
let velocity = 0;
let lastMoveTime = 0;

// ===== RENDER =====
function render(){
  left.innerHTML = images[index-1] ? `<img src="${images[index-1]}">` : "";
  right.innerHTML = images[index] ? `<img src="${images[index]}">` : "";
  indicator.innerText = `${index+1}-${Math.min(index+2,images.length)} / ${images.length}`;
}

// ===== START DRAG =====
function startDrag(x){
  if(index >= images.length-1) return;
  dragging = true;
  startX = x;
  velocity = 0;
  lastMoveTime = Date.now();
  dragPage.innerHTML = `<img src="${images[index]}">`;
  shadow.style.opacity = 0.4;
}

// ===== MOVE DRAG =====
function moveDrag(x){
  if(!dragging) return;
  const dx = x - startX;
  const bookWidth = book.offsetWidth / 2;
  let progress = Math.max(-bookWidth, Math.min(0, dx));
  let angle = (progress / bookWidth) * 180;

  dragPage.style.transform = `rotateY(${angle}deg)`;

  const now = Date.now();
  velocity = (x - startX) / (now - lastMoveTime + 1);
  lastMoveTime = now;

  shadow.style.opacity = Math.min(0.8, Math.abs(angle)/180);
}

// ===== END DRAG =====
function endDrag(){
  if(!dragging) return;
  dragging = false;

  const inertia = velocity * 300;

  if(inertia < -120){
    flipNext();
  } else {
    dragPage.style.transform = `rotateY(0deg)`;
    shadow.style.opacity = 0;
  }
}

// ===== FLIP =====
function flipNext(){
  dragPage.style.transition = "transform .6s cubic-bezier(.2,.7,.3,1)";
  dragPage.style.transform = "rotateY(-180deg)";
  shadow.style.opacity = 0;

  setTimeout(()=>{
    dragPage.style.transition = "";
    dragPage.style.transform = "";
    dragPage.innerHTML = "";
    index += 2;
    render();
  },600);
}

// ===== EVENTS =====
right.addEventListener("mousedown", e=>startDrag(e.clientX));
window.addEventListener("mousemove", e=>moveDrag(e.clientX));
window.addEventListener("mouseup", endDrag);

right.addEventListener("touchstart", e=>startDrag(e.touches[0].clientX));
window.addEventListener("touchmove", e=>moveDrag(e.touches[0].clientX));
window.addEventListener("touchend", endDrag);

// ===== INIT =====
render();
</script>

</body>
</html>
