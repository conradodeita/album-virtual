<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Álbum 3D Realista</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
}

body{
  background:radial-gradient(circle,#111 0%,#000 70%);
  font-family:Arial,Helvetica,sans-serif;
  overflow:hidden;
  color:#fff;
}

/* ===== STAGE ===== */
#stage{
  position:absolute;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
  perspective:3500px;
}

/* ===== BOOK ===== */
#book{
  width:min(92vw,1100px);
  aspect-ratio:2 / 1;
  position:relative;
  display:flex;
  transform-style:preserve-3d;
}

/* ===== MOBILE MODE ===== */
body.mobile #book{
  aspect-ratio:1 / 1;
}

/* ===== PAGE ===== */
.page{
  flex:1;
  position:relative;
  overflow:hidden;
  background:#000;
  border-radius:12px;
  box-shadow:0 25px 60px rgba(0,0,0,.85);
}

.page img{
  width:100%;
  height:100%;
  object-fit:cover;
  user-select:none;
  pointer-events:none;
}

/* ===== SPINE ===== */
#spine{
  width:30px;
  background:
    linear-gradient(to right,
      #000 0%,
      #333 50%,
      #000 100%);
  box-shadow:
    inset -4px 0 8px rgba(255,255,255,.2),
    inset 4px 0 12px rgba(0,0,0,.9);
}

/* ===== DRAG PAGE ===== */
#dragPage{
  position:absolute;
  top:0;
  right:0;
  width:50%;
  height:100%;
  transform-origin:left center;
  pointer-events:none;
  backface-visibility:hidden;
  overflow:hidden;
  border-radius:12px;
}

/* Curvatura fake mesh */
#dragPage::after{
  content:"";
  position:absolute;
  inset:0;
  background:
    linear-gradient(120deg,
      rgba(255,255,255,.25),
      rgba(255,255,255,0) 40%,
      rgba(0,0,0,.4) 70%);
  mix-blend-mode:overlay;
  pointer-events:none;
}

/* ===== SHADOW ===== */
#shadow{
  position:absolute;
  inset:0;
  pointer-events:none;
  background:linear-gradient(to left,rgba(0,0,0,.7),transparent);
  opacity:0;
}

/* ===== INDICATOR ===== */
#indicator{
  position:fixed;
  bottom:16px;
  width:100%;
  text-align:center;
  font-size:14px;
  color:#ccc;
}

/* ===== BUTTONS ===== */
.nav-btn{
  position:fixed;
  top:50%;
  transform:translateY(-50%);
  padding:14px 18px;
  font-size:18px;
  background:rgba(0,0,0,.6);
  border:1px solid rgba(255,255,255,.2);
  border-radius:8px;
  color:#fff;
  cursor:pointer;
  backdrop-filter:blur(6px);
}

#prevBtn{ left:20px; }
#nextBtn{ right:20px; }

body.mobile .nav-btn{
  display:none;
}
</style>
</head>

<body>

<button id="prevBtn" class="nav-btn">◀</button>
<button id="nextBtn" class="nav-btn">▶</button>

<div id="stage">
  <div id="book">
    <div class="page" id="left"></div>
    <div id="spine"></div>
    <div class="page" id="right"></div>

    <div id="dragPage"></div>
    <div id="shadow"></div>
  </div>
</div>

<div id="indicator"></div>

<script>
// ================= IMAGES =================
const images = [
 "https://static.wfolio.com/file/AqiFFw_TXMM4LDwoI2TPSYAM1lHVLAGB/F3eUE25SDaCuzHhNj6Pu6JOqhHkcmUkD/y5OULgSkTfmEFevVH6Sf_loR35892Czc/Dy85mrv_jbZUp1onboKxfJJyYVSz1JUI/U4y1x4H6X9pCsFBn2RAH-qGGC4IFVPta/uWbrLQxih0WNi86HfJcUhzy8Oli73U59.jpg",
 "https://static.wfolio.com/file/AqiFFw_TXMM4LDwoI2TPSYAM1lHVLAGB/F3eUE25SDaCuzHhNj6Pu6JOqhHkcmUkD/qNEexo_dNL8-0oCofAljcVJFCTV3ZNlV/bdDGeVS7xD1w9l9IcE0L6z8vmYH8FFbe/A9zTFht7a6E7ez6hREaW3YOtprh60w0u/Wi1bdshLwU4.jpg",
 "https://static.wfolio.com/file/AqiFFw_TXMM4LDwoI2TPSYAM1lHVLAGB/F3eUE25SDaCuzHhNj6Pu6JOqhHkcmUkD/Pw65VlFkMsO6lQV4CDlyrWsjXSkEz0Ah/c1i9ixp9Tg4A9hTDQdcO1Dxc_yoBdACL/FPfIlczoHtlqVb5752-w7QR0voXhMX9o/RQShPhBhB68.jpg",
 "https://static.wfolio.com/file/AqiFFw_TXMM4LDwoI2TPSYAM1lHVLAGB/F3eUE25SDaCuzHhNj6Pu6JOqhHkcmUkD/zZqnEvAAIq6FvmDfHTFJsBgKq8WvL3nN/etBmGlCmqocfOuTYTj47VdmnJUlMdJQb/5pfWbmfSHzYVP2ZQTXxT0z3RwnNp6C5_/T83uCi3ltVc.jpg",
 "https://static.wfolio.com/file/AqiFFw_TXMM4LDwoI2TPSYAM1lHVLAGB/F3eUE25SDaCuzHhNj6Pu6JOqhHkcmUkD/jiBuVFhkgxZMh4Wla0d04ExhZSW-9Y09/SZWHP4lTKay1zdNJyyl_XcVtWr2o6qxm/mpIIlAh7ux9fboPNVlRqOXz3N0GVMkMP/eVq_OU5Y-FU.jpg",
 "https://static.wfolio.com/file/AqiFFw_TXMM4LDwoI2TPSYAM1lHVLAGB/F3eUE25SDaCuzHhNj6Pu6JOqhHkcmUkD/8gCM3saGL9vugTjFfIGW6HRjn6Ohg-Te/Z8J9OcgsHBZyJ6UI6sTsHRFqZFRF-a7M/bzylEzdicq9A1agfjdUp34Q1wfpHF8Eb/fGgeWxfcm1A.jpg"
];

// ================= CORE =================
let index = 0;
let dragging = false;
let startX = 0;
let velocity = 0;
let lastTime = 0;

const left = document.getElementById("left");
const right = document.getElementById("right");
const dragPage = document.getElementById("dragPage");
const shadow = document.getElementById("shadow");
const indicator = document.getElementById("indicator");
const book = document.getElementById("book");

const prevBtn = document.getElementById("prevBtn");
const nextBtn = document.getElementById("nextBtn");

// ================= MOBILE DETECT =================
function detectMobile(){
  if(window.innerWidth < 760){
    document.body.classList.add("mobile");
  }else{
    document.body.classList.remove("mobile");
  }
}
window.addEventListener("resize", detectMobile);
detectMobile();

// ================= RENDER =================
function render(){
  if(document.body.classList.contains("mobile")){
    left.innerHTML = "";
    right.innerHTML = images[index] ? `<img src="${images[index]}">` : "";
    indicator.innerText = `${index+1} / ${images.length}`;
  }else{
    left.innerHTML  = images[index-1] ? `<img src="${images[index-1]}">` : "";
    right.innerHTML = images[index]   ? `<img src="${images[index]}">`   : "";
    indicator.innerText = `${index+1}-${Math.min(index+2,images.length)} / ${images.length}`;
  }
}
render();

// ================= DRAG =================
function startDrag(x){
  if(index >= images.length-1) return;
  dragging = true;
  startX = x;
  velocity = 0;
  lastTime = Date.now();
  dragPage.innerHTML = `<img src="${images[index]}">`;
  shadow.style.opacity = 0.4;
}

function moveDrag(x){
  if(!dragging) return;
  const dx = x - startX;
  const pageWidth = book.offsetWidth / 2;
  let progress = Math.max(-pageWidth, Math.min(0, dx));
  let angle = (progress / pageWidth) * 180;

  dragPage.style.transform = `
    rotateY(${angle}deg)
    skewY(${angle/25}deg)
  `;

  const now = Date.now();
  velocity = (x - startX) / (now - lastTime + 1);
  lastTime = now;

  shadow.style.opacity = Math.min(0.9, Math.abs(angle)/160);
}

function endDrag(){
  if(!dragging) return;
  dragging = false;
  const inertia = velocity * 320;

  if(inertia < -120){
    flipNext();
  }else{
    dragPage.style.transform = "rotateY(0deg)";
    shadow.style.opacity = 0;
  }
}

// ================= FLIP =================
function flipNext(){
  dragPage.style.transition = "transform .7s cubic-bezier(.2,.7,.2,1)";
  dragPage.style.transform = "rotateY(-180deg)";
  shadow.style.opacity = 0;

  setTimeout(()=>{
    dragPage.style.transition = "";
    dragPage.style.transform = "";
    dragPage.innerHTML = "";
    index += document.body.classList.contains("mobile") ? 1 : 2;
    render();
  },700);
}

function flipPrev(){
  index -= document.body.classList.contains("mobile") ? 1 : 2;
  if(index < 0) index = 0;
  render();
}

// ================= EVENTS =================
right.addEventListener("mousedown", e=>startDrag(e.clientX));
window.addEventListener("mousemove", e=>moveDrag(e.clientX));
window.addEventListener("mouseup", endDrag);

right.addEventListener("touchstart", e=>startDrag(e.touches[0].clientX));
window.addEventListener("touchmove", e=>moveDrag(e.touches[0].clientX));
window.addEventListener("touchend", endDrag);

nextBtn.onclick = flipNext;
prevBtn.onclick = flipPrev;
</script>

</body>
</html>
